<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>CampusCast Registration Unit Tests</title>

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }

    h1 {
      font-size: 22px;
      margin-bottom: 12px;
    }

    #output {
      white-space: pre-wrap;
      background: #ffffff;
      padding: 16px;
      border-radius: 8px;
      border: 1px solid #ddd;
      font-size: 14px;
      line-height: 20px;
    }
  </style>
</head>

<body>
  <h1>CampusCast - Registration Unit Tests</h1>
  <pre id="output"></pre>

  <script src="/reg/regValidation.js"></script>

  <script>
    function log(text) {
      document.getElementById("output").textContent += text + "\n";
    }

    function printResult(name, expected, actual) {
      const status = expected === actual ? "PASS" : "FAIL";
      log(status + "  " + name);
      log("      Expected: " + expected);
      log("      Got:      " + actual);
      log("");
    }

    function runRegistrationTests() {
      log("Running registration validation tests");
      log("--------------------------------------\n");

      // TC-R1: Missing name
      {
        const result = validateRegistrationInput("", "2000-01-01", "user@example.com", "secret123", "voter");

        printResult("TC-R1: ok value for missing name", false, result.ok);
        printResult("TC-R1: error message for name", "নাম দিন।", result.errors.name);
      }

      // TC-R2: Invalid short name
      {
        const result = validateRegistrationInput("AB", "2000-01-01", "user@example.com", "secret123", "voter");

        printResult("TC-R2: ok value for short name", false, result.ok);
        printResult("TC-R2: error message", "নাম কমপক্ষে ৩ অক্ষরের হতে হবে।", result.errors.name);
      }

      // TC-R3: Missing date of birth
      {
        const result = validateRegistrationInput("Student", "", "user@example.com", "secret123", "voter");

        printResult("TC-R3: ok value for missing dob", false, result.ok);
        printResult("TC-R3: error message", "জন্মতারিখ নির্বাচন করুন।", result.errors.dob);
      }

      // TC-R4: Invalid email
      {
        const result = validateRegistrationInput("Student", "2000-01-01", "wrongemail", "secret123", "voter");

        printResult("TC-R4: ok value for invalid email", false, result.ok);
        printResult("TC-R4: error message", "সঠিক ইমেইল দিন।", result.errors.email);
      }

      // TC-R5: Missing password
      {
        const result = validateRegistrationInput("Student", "2000-01-01", "user@example.com", "", "voter");

        printResult("TC-R5: ok value for missing password", false, result.ok);
        printResult("TC-R5: error message", "পাসওয়ার্ড দিন।", result.errors.password);
      }

      // TC-R6: Weak password
      {
        const result = validateRegistrationInput("Student", "2000-01-01", "user@example.com", "123", "voter");

        printResult("TC-R6: ok value for short password", false, result.ok);
        printResult("TC-R6: error message", "পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে।", result.errors.password);
      }

      // TC-R7: Missing role
      {
        const result = validateRegistrationInput("Student", "2000-01-01", "user@example.com", "secret123", "");

        printResult("TC-R7: ok value for missing role", false, result.ok);
        printResult("TC-R7: error message", "রোল নির্বাচন করুন।", result.errors.role);
      }

      // TC-R8: Valid registration
      {
        const result = validateRegistrationInput("Student", "2000-01-01", "user@example.com", "secret123", "voter");

        printResult("TC-R8: ok value for valid registration", true, result.ok);
      }

      log("All registration validation tests completed.");
    }

    runRegistrationTests();
  </script>
</body>
</html>
